(this.webpackJsonpkama=this.webpackJsonpkama||[]).push([[0],{125:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return w}));var r=n(11),a=n.n(r),s=n(22),c=n(34),i=n(5),o=n(19),u="FOLLOW",l="UNFOLLOW",d="SET_USERS",j="SET_CURRENT_PAGE",b="TOTAL_USERS_COUNT",f="TOGGLE_IS_FETCHING",O="TOGGLE_FOLLOWING_PROGRESS",p={users:[],totalUserCount:21,pageUserCount:5,activePage:1,isFetching:!0,followinginProgress:[]},h=function(e){return{type:u,userId:e}},m=function(e){return{type:l,userId:e}},g=function(e){return{type:j,activePage:e}},v=function(e){return{type:f,isFetching:e}},x=function(e,t){return{type:O,followinginProgress:e,userId:t}},_=function(e,t){return function(n){n(g(e)),n(v(!0)),o.c.getAllUsers(e,t).then((function(e){var t,r;n(v(!1)),n((t=e.items,{type:d,users:t})),n((r=e.totalCount,{type:b,totalUserCount:r}))}))}},y=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0,e)),t.next=3,o.c.setUnfollow(e);case 3:0===t.sent.resultCode&&n(m(e)),n(x(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(!0,e)),t.next=3,o.c.setFollow(e);case 3:0===t.sent.resultCode&&n(h(e)),n(x(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case l:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case d:return Object(i.a)(Object(i.a)({},e),{},{users:Object(c.a)(t.users)});case j:return Object(i.a)(Object(i.a)({},e),{},{activePage:t.activePage});case b:return Object(i.a)(Object(i.a)({},e),{},{totalUserCount:t.totalUserCount});case f:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case O:return Object(i.a)(Object(i.a)({},e),{},{followinginProgress:t.followinginProgress?[].concat(Object(c.a)(e.followinginProgress),[t.userId]):e.followinginProgress.filter((function(e){return e!==t.userId}))});default:return e}}},126:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return f}));var r=n(11),a=n.n(r),s=n(22),c=n(5),i=n(19),o="GET_PROFILE",u="SET_STATUS",l={profile:null,status:"default status"},d=function(e){return{type:u,status:e}},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.c.getProfile(e);case 2:r=t.sent,console.log(r),n((a=r.data,{type:o,profile:a}));case 5:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(d(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(d(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(c.a)(Object(c.a)({},e),{},{profile:t.profile});case u:return Object(c.a)(Object(c.a)({},e),{},{status:t.status});default:return e}}},130:function(e,t,n){e.exports={header:"header_header__v9FKw"}},131:function(e,t,n){},134:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(135),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"7b14e426-fa0c-47bc-a6f8-9026a4b30723"}}),s={getAllUsers:function(e,t){return a.get("/users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setUnfollow:function(e){return a.delete("/follow/"+e).then((function(e){return e.data}))},setFollow:function(e){return a.post("/follow/"+e).then((function(e){return e.data}))},getProfile:function(e){return c.getProfile(e)}},c={getProfile:function(e){return a.get("/profile/"+e)},getStatus:function(e){return a.get("/profile/status/"+e)},updateStatus:function(e){return a.put("/profile/status",{status:e})}},i={me:function(){return a.get("/auth/me")},login:function(e,t,n){return a.post("/auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return a.delete("/auth/login")}}},285:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),c=n(65),i=n.n(c),o=n(27),u=n(28),l=n(30),d=n(29),j=n(130),b=n.n(j),f=(n.p,function(){return Object(r.jsx)("header",{className:b.a.header,children:Object(r.jsx)("h1",{children:"Header"})})}),O=n(35),p=n.n(O),h=n(12),m=function(e){return Object(r.jsxs)("div",{className:p.a.topnav,id:"myTopnav",children:[Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(h.b,{to:"/",children:"Home"})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/profile/",activeClassName:p.a.active,children:"Profile"})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/posts",activeClassName:p.a.active,children:"Posts"})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/dialogs",activeClassName:p.a.active,children:"Dialogs"})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/users",activeClassName:p.a.active,children:"Users"})}),Object(r.jsx)("a",{href:"#contact",children:"Contact"}),Object(r.jsx)("a",{href:"#about",children:"About"}),Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/login",activeClassName:p.a.active,children:"Login"})})]})},g=n(68),v=n.n(g),x=n(131),_=n.n(x),y=function(e){return Object(r.jsx)("div",{className:_.a.post,children:Object(r.jsx)("div",{children:e.message})})},w=n(127),S=n(128),k=function(e){if(!e)return"Field is required"},P=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},C=n(5),E=n(72),N=n(51),I=n.n(N),T=function(e){e.input;var t=e.meta,n=(e.child,Object(E.a)(e,["input","meta","child"])),a=t.touched&&t.error;return Object(r.jsxs)("div",{className:I.a.formControl+" "+(a?I.a.error:""),children:[Object(r.jsx)("div",{children:n.children}),a&&Object(r.jsx)("span",{children:t.error})]})},L=function(e){var t=e.input,n=(e.meta,e.child,Object(E.a)(e,["input","meta","child"]));return Object(r.jsx)(T,Object(C.a)(Object(C.a)({},e),{},{children:Object(r.jsx)("textarea",Object(C.a)(Object(C.a)({},t),n))}))},A=function(e){var t=e.input,n=(e.meta,e.child,Object(E.a)(e,["input","meta","child"]));return Object(r.jsx)(T,Object(C.a)(Object(C.a)({},e),{},{children:Object(r.jsx)("input",Object(C.a)(Object(C.a)({},t),n))}))},F=P(10),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;console.log("POST RNEDER");var t=this.props.posts.message.map((function(e){return Object(r.jsx)(y,{message:e.message},e.id)}));return Object(r.jsxs)("div",{className:v.a.posts,children:[Object(r.jsx)("div",{className:v.a.input_group,children:Object(r.jsx)(R,{onSubmit:function(t){e.props.addPost(t.newMessageBody)}})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Posts:"}),Object(r.jsx)("div",{children:t},t.id)]})]})}}]),n}(a.PureComponent),R=Object(S.a)({form:"postsForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{component:L,name:"newMessageBody",placeholder:"Enter your message",validate:[k,F]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Send"})})]})})),M=U,D=n(34),G="ADD-POST1",z={stateInput:"",message:[{id:1,message:"Hello!",key:1},{id:2,message:"Hi",key:2},{id:3,message:"How are yoy?",key:3}],profile:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(C.a)(Object(C.a)({},e),{},{message:[].concat(Object(D.a)(e.message),[{id:4,message:t.newMessageBody}])});default:return e}},H=n(14),W=n(64),q=n(8),K=Object(q.d)(Object(H.b)((function(e){return{posts:e.posts,login:e.login}}),(function(e){return{addPost:function(t){e(function(e){return{type:G,newMessageBody:e}}(t))}}})),W.a)(M),J=n(10),V=n(55),X=n.n(V),Y=n(134),Q=n.n(Y),Z=function(e){return Object(r.jsxs)("div",{className:Q.a.message,children:[e.message," "]})},$=function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(h.b,{to:"/dialogs/".concat(e.id),children:e.name})})},ee=P(10),te=Object(S.a)({form:"dialogsForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{component:L,name:"newMessageBody",placeholder:"Enter your message",validate:[k,ee]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Send"})})]})})),ne=function(e){var t=e.dialogs.user.map((function(e){return Object(r.jsx)($,{id:e.id,name:e.name},e.key)})),n=e.dialogs.message.map((function(e){return Object(r.jsx)(Z,{id:e.id,message:e.message},e.key)}));return Object(r.jsxs)("div",{className:X.a.dialogs,children:[Object(r.jsx)("div",{className:X.a.dilogsItems,children:t},t.key),Object(r.jsxs)("div",{className:X.a.messages,children:[n,Object(r.jsx)(te,{onSubmit:function(t){e.addPost(t.newMessageBody)}})]},n.key)]})},re="ADD-POST-DIALOG",ae={user:[{id:1,name:"Andrey",key:1},{id:2,name:"Dima",key:2},{id:3,name:"Enot",key:3}],message:[{id:1,message:"Hello!"},{id:2,message:"Hi"},{id:3,message:"How are yoy?"}]},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n={id:5,name:"Enot",key:5};switch(t.type){case re:return Object(C.a)(Object(C.a)({},e),{},{message:[].concat(Object(D.a)(e.message),[{id:4,message:t.newMessageBody}]),user:[].concat(Object(D.a)(e.user),[n])});default:return e}},ce=Object(q.d)(Object(H.b)((function(e){return{dialogs:e.dialogs,stateInput:e.dialogs.stateInput,login:e.login}}),(function(e){return{addPost:function(t){e(function(e){return{type:re,newMessageBody:e}}(t))}}})),W.a)(ne),ie=Object(S.a)({form:"login"})((function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{placeholder:"Email",name:"email",component:A,validate:[k]})}),Object(r.jsx)("div",{children:Object(r.jsx)(w.a,{placeholder:"Password",validate:[k],type:"password",name:"password",component:A})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(w.a,{type:"checkbox",name:"rememberMe",component:A})," remember me"]}),e.error&&Object(r.jsx)("div",{className:I.a.formSummError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})})),oe=function(e){return e.stateLogin.isAuth?Object(r.jsx)(J.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"LOGIN: "})," ",e.stateLogin.isAuth?e.stateLogin.email:Object(r.jsx)(h.b,{to:"/login",children:"Auth"}),Object(r.jsx)(ie,{onSubmit:function(t){e.loginReducer(t.email,t.password,t.rememberMe)},forms:e.forms})]})},ue=n(32),le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthData()}},{key:"render",value:function(){return Object(r.jsx)(oe,{stateLogin:this.props.login,loginReducer:this.props.loginReducer,logout:this.props.logout,forms:this.props.form})}}]),n}(s.a.Component),de=Object(H.b)((function(e){return{login:e.login,forms:e.form.login}}),{getAuthData:ue.b,loginReducer:ue.c,logout:ue.d})(le),je="INIT_APP",be={initialize:!1},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(C.a)(Object(C.a)({},e),{},{initialize:!0});default:return e}},Oe=n(67),pe=s.a.lazy((function(){return n.e(3).then(n.bind(null,289))})),he=s.a.lazy((function(){return n.e(4).then(n.bind(null,288))})),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeThunk()}},{key:"render",value:function(){return this.props.initialize?Object(r.jsx)("div",{children:Object(r.jsxs)(h.a,{basename:"/incubator_react",children:[Object(r.jsx)(m,{}),Object(r.jsx)(f,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(J.b,{path:"/dialogs",render:function(){return Object(r.jsx)(s.a.Suspense,{fallback:Object(r.jsx)(Oe.a,{}),children:Object(r.jsx)(ce,{})})}}),Object(r.jsx)(J.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(s.a.Suspense,{fallback:Object(r.jsx)(Oe.a,{}),children:Object(r.jsx)(he,{})})}}),Object(r.jsx)(J.b,{path:"/posts",render:function(){return Object(r.jsx)(K,{})}}),Object(r.jsx)(J.b,{path:"/users",render:function(){return Object(r.jsx)(pe,{})}}),Object(r.jsx)(J.b,{path:"/login",render:function(){return Object(r.jsx)(de,{})}})]})]})}):Object(r.jsx)(Oe.a,{})}}]),n}(s.a.Component),ge=Object(q.d)(Object(H.b)((function(e){return{initialize:e.app.initialize}}),{initializeThunk:function(){return function(e){var t=e(Object(ue.b)());Promise.all([t]).then((function(){e({type:je})}))}}}),J.f)(me),ve=n(125),xe=n(126),_e=n(70),ye=n(129),we=Object(q.c)({dialogs:se,posts:B,users:ve.a,profile:xe.a,login:ue.a,form:ye.a,app:fe}),Se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,ke=Object(q.e)(we,Se(Object(q.a)(_e.a,_e.a)));i.a.render(Object(r.jsx)(h.a,{children:Object(r.jsx)(H.a,{store:ke,children:Object(r.jsx)(ge,{})})}),document.getElementById("root"))},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f}));var r=n(11),a=n.n(r),s=n(22),c=n(5),i=n(40),o=n(19),u="GET_AUTH",l={id:null,email:null,login:null,isAuth:!1},d=function(e,t,n,r){return{type:u,id:e,email:t,login:n,isAuth:r}},j=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.me();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,c=r.email,i=r.login,t(d(s,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var c,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.login(e,t,n);case 2:0===(c=r.sent).data.resultCode?s(j()):(u=c.data.messages.length>0?c.data.messages[0]:"Some error",s(Object(i.a)("login",{_error:u})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},f=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.logout();case 2:0===e.sent.data.resultCode&&t(d(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(c.a)(Object(c.a)({},e),t);default:return e}}},35:function(e,t,n){e.exports={topnav:"navbar_topnav__37qta",active:"navbar_active__1LL-m",icon:"navbar_icon__TbL-i"}},51:function(e,t,n){e.exports={formControl:"FormsControls_formControl__3oI2W",error:"FormsControls_error__9lcue",formSummError:"FormsControls_formSummError__tnFPL"}},55:function(e,t,n){e.exports={dialogs:"dialogs_dialogs__2B_-5",dilogsItems:"dialogs_dilogsItems__39KYh",active:"dialogs_active__25GoT",dialog:"dialogs_dialog__2oT6c",messages:"dialogs_messages__3lqZz",message:"dialogs_message__1Id2-"}},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(5),a=n(27),s=n(28),c=n(30),i=n(29),o=n(1),u=(n(14),n(0)),l=n.n(u),d=n(10),j=function(e){return function(t){Object(c.a)(u,t);var n=Object(i.a)(u);function u(){return Object(a.a)(this,u),n.apply(this,arguments)}return Object(s.a)(u,[{key:"render",value:function(){return this.props.login.isAuth?Object(o.jsx)(e,Object(r.a)({},this.props)):Object(o.jsx)(d.a,{to:"/login"})}}]),u}(l.a.Component)}},67:function(e,t,n){"use strict";var r=n(1),a=(n(0),n.p+"static/media/spinner.b767aab4.svg");t.a=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a})})}},68:function(e,t,n){e.exports={posts:"posts_posts__2Qjhz",input_group:"posts_input_group__V2AaR"}}},[[285,1,2]]]);
//# sourceMappingURL=main.8c4db85d.chunk.js.map